---
- name: DÃ©mo Ansible dans GitHub Actions avec accÃ¨s public
  hosts: all
  become: yes
  tasks:
    - name: Installer Docker
      apt:
        name: docker.io
        state: present
        update_cache: yes

    - name: S'assurer que Docker est dÃ©marrÃ©
      service:
        name: docker
        state: started
        enabled: yes

    - name: CrÃ©er un rÃ©pertoire pour la page web
      file:
        path: /tmp/html
        state: directory

    - name: CrÃ©er une page d'accueil custom
      copy:
        dest: /tmp/html/index.html
        content: "<h1>ğŸš€ Youhou! DÃ©ployÃ© avec Ansible dans GitHub Actions et accessible publiquement ğŸŒ</h1>"

    - name: Lancer un conteneur nginx
      community.docker.docker_container:
        name: demo-nginx
        image: nginx:latest
        state: started
        ports:
          - "8080:80"
        volumes:
          - /tmp/html:/usr/share/nginx/html
